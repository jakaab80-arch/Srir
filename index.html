<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  background:#111;
  color:#fff;
  font-family: Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.chat {
  width:360px;
  background:#1e1e1e;
  padding:10px;
  border-radius:10px;
}
#messages {
  height:320px;
  overflow-y:auto;
  border:1px solid #333;
  padding:5px;
  margin-bottom:5px;
}
input, button {
  width:100%;
  padding:8px;
  border:none;
  border-radius:5px;
  margin-top:5px;
}
button {
  background:#00b894;
  font-weight:bold;
}
.msg {
  margin-bottom:4px;
}
.name {
  color:#00cec9;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="chat">
  <div id="messages"></div>
  <input id="name" placeholder="Ø§Ø³Ù…Ùƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" />
  <input id="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." />
  <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<script>
// ðŸ”¹ Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  databaseURL: "https://PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "PROJECT_ID",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const chatRef = db.ref("publicChat/messages");

chatRef.limitToLast(100).on("child_added", snap => {
  const msg = snap.val();
  const div = document.createElement("div");
  div.className = "msg";
  div.innerHTML = `<span class="name">${msg.name}:</span> ${msg.text}`;
  document.getElementById("messages").appendChild(div);
  document.getElementById("messages").scrollTop = 999999;
});

function send() {
  const text = document.getElementById("text").value.trim();
  const name = document.getElementById("name").value || "Ø²Ø§Ø¦Ø±";
  if (!text) return;

  chatRef.push({
    name: name,
    text: text,
    time: Date.now()
  });

  document.getElementById("text").value = "";
}
</script>

</body>
</html>
